webpackJsonp([18],{1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=t.ENDED_PLAYING_VIDEO="Ended Playing Course Video",r=t.STARTED_VIDEO="Started Playing Course Video",i=(t.SEND_TRACE_VIDEO="Sent Trace Video",t.PLAYBACK_RATE_CHANGE="Changed Course Video Speed");t.playbackRateChangeEvent=function(e){return{name:i,data:e}},t.endedPlayingVideoEvent=function(e){return{name:o,data:e}},t.startedVideoEvent=function(e){return{name:r,data:e}}},2566:function(e,t,n){"use strict";var o=n(28).default;n(2567),n(2568),n(2569),n(2570),n(2571),n(2572),n(2573),n(2574),n(2575),o.launch(n(2576),n(2578),n(2579),n(2580),n(2583),n(2586),n(2588),n(2589),n(2591),n(779),n(2592))},2567:function(e,t,n){"use strict";window._define("widgets/linkedSelect",["jquery","_","widgets/baseWidget"],(function(e,t,n){return e.widget("OC.linkedSelect",n,{options:{rawdata:null,freeFieldTrigger:null},_create:function(){this._super(),this.value=null,this.elements.$mainSelelect=this._createSelect(this._getNodeChildren(0)),this.elements.$freeField=e('<input type="text">').appendTo(this.element),this._on(this.elements.$freeField,{input:this._onChangeFreeField}),this._toggleFreeField(!1)},_getNodeChildren:function(e){var n=this.options.rawdata[e],o=n?n.children:null;return o?t.sortBy(o,"position"):[]},_createSelect:function(t,n){var o,r=e("select",this.element),i=this.options.freeFieldTrigger,a=!1;return n||(n=e("<select>"),a=!0),n.empty(),t.unshift({id:"",title:""}),t.forEach((function(t){o=e("<option>").attr("value",t.id).text(t.title).appendTo(n),i&&t[i.field]===i.value&&o.data("needFreeField",!0)})),this._on(n,{change:this._onSelectChange}),a&&(0===r.length?n.appendTo(this.element):n.insertAfter(r.last())),n},_onChangeFreeField:function(e){this._trigger("changeFreeField",e,{value:this.freeFieldVal()})},_onSelectChange:function(t){var n=e(t.currentTarget),o=n.val(),r=!!e(":selected",n).data("needFreeField"),i=this._getNodeChildren(o);n.nextAll("select").remove(),i.length>0&&this._createSelect(i,this._getNextSelect(n)),this._toggleFreeField(r),this.value=o,this._trigger("change",t,{value:this.val()})},_getNextSelect:function(e){var t=e.next("select");return t.length?t:null},_toggleFreeField:function(e){this.elements.$freeField.css("visibility",e?"visible":"hidden"),e||(this.elements.$freeField.val(""),this._onChangeFreeField())},val:function(){return this.value},freeFieldVal:function(){return this.elements.$freeField.val()}}),e.OC.linkedSelect}))},2568:function(e,t,n){"use strict";window._define("widgets/courseFormatsBar",["jquery","widgets/baseWidget","Modernizr","bridge/popin"],(function(e,t,n,o){var r="courseFormatsBar",i=n.touchevents;return e.widget("OC."+r,t,{options:{},_create:function(){var t=this;this._super(),this.element.on(i?"tap":"click",(function(n){var r=e(n.target).parent(),a=function(e){n.preventDefault(),o.open(e)};r.is(".js-popin-activator")&&!i?a(r.data("popin-selector")):i&&a(t.options.popinselector)}))}}),e(".js-course-formats-bar")[r](),e.OC[r]}))},2569:function(e,t,n){"use strict";window._define("class/coursePage",(function(){var e=function(e){this.config=e};return e.prototype.isPart=function(){return!!this.getPartId()},e.prototype.getPartId=function(){return this.config.partId},e.prototype.getPartTitle=function(){return this.config.partTitle},e.prototype.getPartSlug=function(){return this.config.partSlug},e.prototype.getCourseId=function(){return this.config.courseId},e.prototype.getCourseTitle=function(){return this.config.courseTitle},e.prototype.getCourseSlug=function(){return this.config.courseSlug},e}))},2570:function(e,t,n){"use strict";window._define("view/contentFocus",["jquery","utils/responsive","common/pubsub"],(function(e,t,n){function o(t){var n=e(t);!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)||n.data("isEnlarged")||(i=n,a.addClass("contentFocus"),a.addClass("contentFocus--video"),a.on("tap.contentFocus click.contentFocus",(function(){i&&(e(i).data("videoPlayer").pause(),r(i))})),n.addClass("is-contentFocused"),void 0===n.data("originalHeight")&&n.data("originalHeight",n.height()),n.data("isEnlarged",!0),n.css("height",""),(function(t){var n=e(t),o=n.height(),r=u.height();e("body, html").animate({scrollTop:n.offset().top-(r-o)/2},200)})(t),window.focus(),e(document).on("keydown.contentFocus",(function(t){27===t.keyCode&&(e(document).off("keydown.contentFocus"),r(i))})))}function r(t){var n=e(t);i=null,a.removeClass("contentFocus"),a.removeClass("contentFocus--video"),a.off("tap.contentFocus click.contentFocus"),n.removeClass("is-contentFocused"),n.height(n.data("originalHeight")),n.data("isEnlarged",!1)}var i,a=e("body"),u=e(window);n.subscribe(n.EVENT.STARTED_VIDEO,(function(e,n){(t.isLarge()||t.isXLarge())&&o(n.iframeElement)}))}))},2571:function(e,t,n){"use strict";window._define("course/view/internalFolding",["jquery","bridge/widgets/foldable","common/commands","utils/responsive"],(function(e,t,n,o){function r(){if("small"===o.getCurrentWidth()||"medium"===o.getCurrentWidth())return!0}function i(){var t=document.location.hash.match(/\/id\/(.*)/);t&&setTimeout((function(){!(function(t){var n,o=e("#"+t);o.length&&(n=o.closest("[data-widget=foldable]")).length&&(n.foldable("instance").open(),e(window).scrollTop(o.offset().top))})(t[1])}),1e3)}var a,u,s="foldable",c=e(".js-userContent"),l=e("> *",c);return n.add("course.view.foldedPartsOpen",(function(){a.each((function(t,n){e(n).foldable("instance").open()}))})),n.add("course.view.foldedPartsClose",(function(){a.each((function(t,n){e(n).foldable("instance").close()}))})),{init:function(){u=(function(e){return e?"h3[id*=r-]":"h2[id*=r-]"})(this.preferences.isBigCourse),(function(n){n.forEach((function(n){var o,i,a=e(n);i=a.wrapAll("<div>").parent().addClass(s).uniqueId(),r()&&a.parent().addClass("is-closed"),o=n.shift(),a=e(n),e(o).addClass(s+"__button secondTitle js-foldable-button").append('<i class="'+s+'__icon icon-next"></i>'),a.wrapAll("<div>").parent().addClass(s+"__content"),i.length>0&&t.create(i)}))})(function(t,n){var o=[],r=[];return t.each((function(t,i){var a=e(i).is(n),u=r.length;(a||u>=1)&&(a&&u>=1&&(o.push(e.merge([],r)),r=[]),r.push(i))})),o.push(e.merge([],r)),o}(l,u)),a=e("."+s,c),r()&&e(".js-course-part li").addClass("course-part-summary--closed"),i()}}}))},2572:function(e,t,n){"use strict";window._define("view/currentCoursePage",["jquery","class/coursePage"],(function(e,t){function n(){return document.location.pathname.match(/\/courses\/([^/]+)(\/(.*))?/)}var o;return{init:function(){var r=this.preferences;r.courseSlug=(function(){var e=n();return e?e[1]:null})(),r.partSlug=(function(){var e=n();return e?e[3]:null})(),r.courseTitle=e("[data-course-title]").data("courseTitle"),r.partTitle=e("[data-part-title]").data("partTitle"),o=new t(r)},get:function(){return o}}}))},2573:function(e,t,n){"use strict";window._define("course/view/pictureZoom",["jquery"],(function(e){function t(e){return!!e.match(/\.(jpeg|jpg|gif|png)$/)}function n(e){return r.src=e.src,r.width===e.width&&r.height===e.height}function o(n){var o=e(n).children();return 1===o.length&&"IMG"===o.get(0).tagName&&t(n.href)}var r=new Image,i=".js-course-container p > img, .js-course-container figure > img";e(document).on("click",".js-course-container a",(function(e){o(e.currentTarget)&&e.preventDefault()})).on("mouseenter",i+", .js-course-container a",(function(t){(o(t.currentTarget)||t.currentTarget.src&&!n(t.currentTarget))&&(function(t){e(t).css("cursor","pointer").css("cursor","-webkit-zoom-in").css("cursor","-moz-zoom-in")})(t.currentTarget)})).on("click",i,(function(o){var r=null,i=e(o.currentTarget).parent(),a="A"===i.get(0).tagName,u=a&&t(i.attr("href")),s=i.find("figcaption");a&&!u||!u&&o.target.src&&n(o.target)||(s.length&&(r=s.html()),e.fancybox.open([{href:u?i.attr("href"):o.target.src,title:r}],{padding:0}))}))}))},2574:function(e,t,n){"use strict";window._define("course/view/traces",["common/pubsub","view/currentCoursePage"],(function(e,t){return{init:function(){var n=t.get();setTimeout((function(){var t,o={courseId:n.getCourseId()};n.isPart()?(t=e.EVENT.VIEW_PART,o.partId=n.getPartId()):t=e.EVENT.VIEW_COURSE,e.publish(t,o)}),1e3)}}}))},2575:function(e,t,n){"use strict";window._define("common/responsiveForm",["jquery","utils/responsive"],(function(e,t){e(document).on("submit",".js-responsiveForm",(function(){var n=t.isSmall()?".js-responsiveForm-desktop":".js-responsiveForm-mobile";e(n,this).remove()}))}))},2576:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(2577));t.default={name:"videoQuota",init:function(){var e=(0,r.default)(".js-course-container"),t=e.find("video").first(),n=e.data("video-blocked-text");if(n&&t.length){var o=(0,r.default)("<div />");i.default.create({message:n},o),o.insertBefore(t)}}}},2577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.widgetName=void 0;var o=(function(e){return e&&e.__esModule?e:{default:e}})(n(11)),r=t.widgetName="tooltipMessage",i=(0,o.default)(r,{options:{text:null,message:"foo"},_create:function(){this._super(r),this.element.addClass("tooltipMessage").html(this.options.message)}});t.default=i},2578:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function o(r,i){try{var a=t[r](i),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(u)}return o("next")})}}function i(e,t){var n={course:_.default.get()||{}};return n.type=t.getType(),n.iframeElement=e,n.videoUrl=t.getSourceUrl(),n}function a(){return void 0===u&&(u=(0,g.default)(".js-course-container").is(".js-course-content")),u}var u,s,c=o(n(18)),l=(function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return (function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n})(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=(function(){var e=r(c.default.mark((function e(t){var n,o,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,o=1,u={onPlay:function(){(0,g.default)(this).data("videoPlayer",n),h(this,n,t)},onPause:function(){!(function(e,t){E.publish(E.EVENT_STOPPED_VIDEO,{type:t.getType(),iframeElement:e})})(this,n)},onProgress:(function(){var e=r(c.default.mark((function e(r,u){var s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.seconds>=10&&(function(e,t,n){var o=i(e,t);o.isIntroVideo=a(),o.claireVideoElementId=parseInt((0,g.default)(e).attr("id").split("r-")[1],10),o.videoDuration=n,-1===b.indexOf(e)&&(b.push(e),E.publish(E.EVENT_VIEW_BEGINNING_VIDEO,o))})(t,n),u.percent>=.9&&p(this,n),e.next=4,n.getPlaybackRate();case 4:(s=e.sent)!==o&&(function(e,t,n){var o=i(e,t);v.default.sendToSegment((0,m.playbackRateChangeEvent)(d({videoSpeed:n,videoUrl:o.videoUrl},o.course)))})(this,n,o=s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}})()},e.next=5,w.create(t,u);case 5:n=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}})(),h=(function(){var e=r(c.default.mark((function e(t,n){var o,r,i,a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=_.default.get(),r={course:o||{}},i=n,r.type=i.getType(),r.iframeElement=t,r.videoUrl=i.getSourceUrl(),-1!==y.indexOf(r.videoUrl)){e.next=12;break}return e.next=9,n.getPlaybackRate();case 9:a=e.sent,v.default.sendToSegment((0,m.startedVideoEvent)(d({videoSpeed:a,videoUrl:r.videoUrl},r.course))),y.push(r.videoUrl);case 12:E.publish(E.EVENT_STARTED_VIDEO,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}})(),p=(function(){var e=r(c.default.mark((function e(t,n){var o,r,a,u,s;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i(t,n),-1===T.indexOf(o.videoUrl)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all([n.getVideoDuration(),n.getPlaybackRate()]);case 5:r=e.sent,a=l(r,2),u=a[0],s=a[1],v.default.sendToSegment((0,m.endedPlayingVideoEvent)(d({videoDuration:u,videoSpeed:s,videoUrl:o.videoUrl},o.course))),T.push(o.videoUrl);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}})(),v=o(n(119)),m=n(1076),g=o(n(4)),_=o(n(136)),E=n(330),w=n(899),b=[],y=[],T=[];e.exports.init=function(){(0,g.default)("video[data-claire-element-id]").each((function(e,t){var n=(0,g.default)(t);a()||(void 0===s&&(s=(0,g.default)(".js-course-container").is(".js-userCanWatchVideo")),s)||(function(e){e.data({blockedVideo:{elementWrapper:(0,g.default)(".js-course-container").data("video-blocked-wrapper")}})})(n),f(t)}))}},2579:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=o(n(330)),i=o(n(397));e.exports.name="startedVideo",e.exports.init=function(){var e=new i.default("/api");r.default.subscribe(r.default.EVENT_VIEW_BEGINNING_VIDEO,(function(t,n){var o=void 0!==n.course.partId,r={courseId:n.course.courseId,videoId:n.claireVideoElementId,userId:window.App.user.id};o&&!n.isIntroVideo&&(r.partId=n.course.partId,e.POST("/trace-videos/",r))}))}},2580:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(2581));t.default={init:function(){(0,r.default)(".js-courseEngagement").each((function(e,t){i.default.create(t)}))}}},2581:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(11)),a=o(n(2582));t.default=(0,i.default)("courseEngagement",{options:{},_create:function(){this._super("js-courseEngagement"),this.elements.$formsContainer=this.getWidgetElement("form"),this._addAjaxedForms()},_addAjaxedForms:function(){var e=this;this.element.find("form[data-ajaxed=true]").each((function(t,n){a.default.create({onBeforeRequest:function(){this._swapForms((0,r.default)(n))}.bind(e)},n)}))},_swapForms:function(e){this.elements.$formsContainer.hide(),this._isUnfollowForm(e)?this._showAfterUnfollowForm():this._showNextState(e)},_isUnfollowForm:function(e){return e.parent(".js-courseEngagement-form").is("[data-unfollow=true]")},_showAfterUnfollowForm:function(){this.elements.$formsContainer.filter("[data-displayedafterunfollow=true]").show()},_showNextState:function(e){var t=e.data("nextstate");this.element.find(t).show()}})},2582:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TARGET_MUST_BE_A_FORM_EXCEPTION=void 0;var r=o(n(4)),i=o(n(11)),a=t.TARGET_MUST_BE_A_FORM_EXCEPTION="the targeted element must be a <form>.";t.default=(0,i.default)("ajaxedForm",{options:{onBeforeRequest:r.default.noop,onSuccess:r.default.noop,onError:r.default.noop},_create:function(){if(this._super("js-ajaxedForm"),!this.element.is("form"))throw new Error(a);this._promise=null,this.elements.$form=this.element,this._attachEvents()},_attachEvents:function(){var e=this;this.elements.$form.on("submit",(function(t){t.preventDefault(),e.submitForm()}))},submitForm:function(){var e=this,t=this.elements.$form;return!this._promise&&this._trigger("onBeforeRequest")&&(this._promise=new Promise(function(n,o){r.default.ajax({type:t.attr("method")||"post",url:t.attr("action"),data:t.serialize()}).always((function(){e._promise=null})).then((function(t){e._trigger("onSuccess",null,t),n()}),(function(){e._trigger("onError"),o()}))})),this._promise}})},2583:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){h.default.isEnabled()&&(e.preventDefault(),f.default.changeCurrentText(m.getWidgetElement("copyUrl").data("tooltip-done")))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;clearInterval(g),g=setTimeout((function(){u(w,!1)}),e)}function a(e){e&&e.length&&(clearInterval(g),(w=(function(e,t){var n=e.parents(t).last();if(n.length)return n;return e})(e,v)).length>0&&u(w,!0))}function u(e,t){e&&((0,c.default)(".hoveredCourseElement",_).removeClass("hoveredCourseElement"),e.toggleClass("hoveredCourseElement",t),t?(!(function(e){m.setData({url:s(e)}),(0,c.default)(".js-courseElementActions-copyUrl",E).each((function(){h.default.enableCopyToElement(this,s(e))}))})(e),(function(e){E.addClass("is-visible").height(e.outerHeight()).position({my:"right top",at:"left-8 top",collision:"fit flip",of:e})})(e),clearInterval(g)):E.removeClass("is-visible"))}function s(e){return document.location.href.match(/[^#]+/)[0]+"#/id/"+e.attr("id")}var c=o(n(4)),l=o(n(235)),d=o(n(793)),f=o(n(2584)),h=o(n(907)),p=o(n(2585)),v="[id^=r-], [id^=video_Player]",m=void 0,g=void 0,_=void 0,E=void 0,w=void 0,b={HOVER_COURSE_ELEMENT_NOT_ACTIVATED_ON_MOBILE_EXCEPTION:"Hover Course Element Not Activated On Mobile",init:function(){d.default.isTouch()&&l.default.throwException(b.HOVER_COURSE_ELEMENT_NOT_ACTIVATED_ON_MOBILE_EXCEPTION),_=(0,c.default)(".js-course-container"),E=(0,c.default)(".js-courseSelementActions"),_.on("mouseleave.courseElementEnter",v,(function(){h.default.isEnabled()&&i()})).on("mouseenter.courseElementEnter",v,(function(){h.default.isEnabled()&&a((0,c.default)(this))})),E.on("mouseleave.courseElementEnter",(function(){h.default.isEnabled()&&i()})).on("mouseenter.courseElementEnter",(function(){h.default.isEnabled()&&a(w)})),E.length>0&&(m=p.default.create({onCopyUrl:r},E))}};e.exports=b},2584:function(e,t,n){"use strict";var o=n(4);t.changeCurrentText=function(e){o(".oc-tooltip:visible").html(e)},t.closeAll=function(){o(".oc-tooltip").css("top","-100000px")}},2585:function(e,t,n){"use strict";var o=(function(e){return e&&e.__esModule?e:{default:e}})(n(4)),r="js-courseElementActions",i=n(11)("courseElementActions",{options:{},_create:function(){this._super(r),this.data={url:""},this._attachEvents()},_attachEvents:function(){var e=this;this.element.on("mousedown.courseElementActions","."+r+"-copyUrl",(function(){(0,o.default)(this).blur()})).on("click.courseElementActions","."+r+"-copyUrl",(function(t){(0,o.default)(this).blur(),e.copyUrl(t)}))},copyUrl:function(e){this._trigger("onCopyUrl",e,this.data.url)},setData:function(e){this.data=o.default.extend(this.data,e),this.getWidgetElement("copyUrl").attr("href",this.data.url)}});e.exports=i},2586:function(e,t,n){"use strict";var o=(function(e){return e&&e.__esModule?e:{default:e}})(n(4)),r=n(237),i=n(153),a=n(238),u=n(2587),s=r.create(i.HIGHLITER_ACE);e.exports.init=function(){var e=(0,o.default)("pre code[data-claire-semantic]:not([data-claire-semantic=console])",(0,o.default)(".js-course-container")),t=new a(s);t.colorizeElement(e).done((function(){e.each((function(e,n){var o=t.getCodeFromElement(n);u.create({source:o.source,language:o.language},n)}))}))}},2587:function(e,t,n){"use strict";var o=(function(e){return e&&e.__esModule?e:{default:e}})(n(4)),r=n(11)("codeBlock",{options:{source:"",language:"text"},_create:function(){this._super("codeBlock"),this._initCodeCopyFeature(),this._attachEvents()},_attachEvents:function(){var e="code-block--show-raw-code";this.elements.$container.on("click","code",function(){this.elements.$container.toggleClass(e).find("textarea").val(this.getCode()).select()}.bind(this)).on("blur","textarea",function(){this.elements.$container.toggleClass(e)}.bind(this))},_initCodeCopyFeature:function(){var e=(0,o.default)("<textarea>");this.elements.$container=this.element.parent(),this.elements.$container.is("pre")||(this.elements.$container=this.element.wrap("<pre>").parent()),e.addClass("code-block--raw-code").insertAfter(this.element),this.elements.$container.addClass("code-block")},getCode:function(){return this.options.source},getLanguage:function(){return this.options.language}});e.exports=r},2588:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=o(n(4)),i=o(n(328));e.exports.init=function(){var e=i.default.elementsMath(i.default.constants.MATH_RENDERER_MATHJAX),t=(0,r.default)(".js-course-container").find("math");t.length>0&&e.mathElement(t)}},2589:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(2590)),a=o(n(185)),u=o(n(330)),s=o(n(136)),c=n(179),l=n(325),d="Downloaded Single Video",f="data-video-source-link",h="data-video-source-size",p=".js-download-video-popin-button",v=".js-download-video-popin-button-legend",m="video",g=".js-video-download-forbidden",_=".js-all-video-download-info",E=".js-single-video-download-info",w=void 0,b=[{RESOLUTION:"low",SUFFIX:"-ld"},{RESOLUTION:"medium",SUFFIX:"-md"},{RESOLUTION:"high",SUFFIX:"-hd"}];t.default={name:"downloadVideoLink",init:function(){function e(e,o){var u=void 0;try{u=c.CurrentUser.get()}catch(e){}u&&u.isPremium?w.isIntroduction?(function(e){t(e,_)})(o):(function(e){var t=(0,r.default)(E).html(),o=(0,r.default)(t),u=(0,r.default)(e),s=u.attr("data-src-origine"),c=a.default.getVideoIdFromUrl(s);t&&u.after(o),o.hasClass("js-download-video-popin-link")&&(o.attr("data-video-id",c).attr("data-video-url",s).addClass("hidden"),i.default.get(s).then((function(e){var t=e.links;!(function(e,t){var o=(0,r.default)(".js-download-video-popin-link[data-video-id="+t+"]");b.forEach((function(t){var n=void 0,r=void 0;void 0!==e[t.RESOLUTION]&&(n=e[t.RESOLUTION].url,r=e[t.RESOLUTION].size,o.attr(f+t.SUFFIX,n).attr(h+t.SUFFIX,r))})),o.on("click",n).removeClass("hidden")})(t,c)})))})(o):(function(e){t(e,g)})(o)}function t(e,t){var n=(0,r.default)(e),o=(0,r.default)(t).html(),i=(0,r.default)(o);n.after(i)}function n(e){var t=(0,r.default)(e.currentTarget),n=(0,r.default)(this);b.forEach(function(e){var i=(0,r.default)(p+e.SUFFIX),a=(0,r.default)(v+e.SUFFIX),u=t.attr(f+e.SUFFIX),s=t.attr(h+e.SUFFIX);if(void 0!==u&&"#"!==u){var c=(0,l.toHumanReadable)(s);i.data("videoInformations",{videoSize:s/1024/1024,courseId:w.courseId,courseTitle:w.courseTitle,partId:w.partId,partTitle:w.partTitle,partSlug:w.partSlug,videoUrl:n.attr("data-video-url"),videoId:n.attr("data-video-id"),resolution:e.RESOLUTION}).removeClass("hidden").attr("download",m+e.SUFFIX).attr("href",u).off("click").on("click",o),a.text(c)}else i.addClass("hidden")}.bind(this))}function o(){var e=(0,r.default)(this).data("videoInformations");u.default.publish(d,e),r.default.fancybox.close()}w=s.default.get(),(0,r.default)(".js-claire-video").each(e)}}},2590:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(185));t.default={get:function(e){return new Promise(function(t,n){"vimeo"!==i.default.getTypeFromUrl(e)&&n(new Error("downloadLinks : must be vimeo url"));var o=(function(e){return"/ajax/videos/"+e+"/download-links"})(i.default.getVideoIdFromUrl(e));r.default.get(o).done((function(e){t(e)}))})}}},2591:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=o(n(4)),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(n(794)),u=o(n(136));t.default={init:function(){var e=u.default.get();e&&-1!==["apprenez-a-programmer-en-java","structurez-vos-donnees-avec-xml","des-applications-ultra-rapides-avec-node-js","avoir-l-audace-d-entreprendre"].indexOf(e.courseSlug)&&setTimeout((function(){(0,i.default)(".js-course-container h3").each((function(t,n){a.publishEnterViewportForElement(n,r({},e))}))}),200)}}},2592:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=a(),n=!1;return t&&t.list.indexOf(e)>-1&&(n=!0),n}function i(){u({list:[],TTL:Date.now()+v})}function a(){var e=g.getItem("history");return e&&(e=JSON.parse(e)),e}function u(e){g.setItem("history",JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(102)),c=o(n(4)),l=n(138),d=o(n(123)),f=o(n(136)),h=n(239),p=5,v=864e5,m="Restricted Page View",g=window.localStorage,_=(0,c.default)(".js-isRestrictablePage").first(),E=_.length>0,w=(function(e){function t(){return (function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t})(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return (function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,s.default),t})();t.default=function(){try{!(function(){var e=_.data("pageIndentifier");(0,l.userIsConnected)()||!E||document.hidden||(function(e){var t=a();if(t&&t.list.length>=p)if(function(){var e=a();return!!e&&Date.now()>e.TTL}())i();else if(!r(e))throw new w}(e),(function(e){var t=a();t||(i(),t=a()),r(e)||t.list.push(e),u(t)})(e))})()}catch(e){if(!(e instanceof w))throw e;!(function(e){setTimeout((function(){d.default.publish(m,e)}),500)})(f.default.get()),(0,c.default)("body").css("overflow","hidden"),(0,h.openPopin)("#popin-view-restriction",{modal:!0})}}}},[2566]);
//# sourceMappingURL=courseView-32d0a694.js.map